<UserControl x:Class="TBox.Forms.PluginsSettings"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             xmlns:my="clr-namespace:WPFControls.Components;assembly=WPFControls"
             xmlns:controls="clr-namespace:WPFControls.Controls;assembly=WPFControls"
             xmlns:autoUpdate="clr-namespace:Common.AutoUpdate;assembly=Common"
             xmlns:units="clr-namespace:WPFControls.Components.Units;assembly=WPFControls"
             xmlns:captioned="clr-namespace:WPFControls.Controls.Captioned;assembly=WPFControls"
             xmlns:objects="clr-namespace:TBox.Code.Objects" xmlns:shelduler="clr-namespace:TBox.Code.Shelduler"
             xmlns:settings2="clr-namespace:TBox.Code.Shelduler.Settings"
             xmlns:settings="clr-namespace:TBox.Code.FastStart.Settings"
             d:DesignHeight="400" d:DesignWidth="500">
    <TabControl >
        <TabItem Header="Enabled plugins">
            <DockPanel>
                <my:PanelToICheckable Name="PanelButtons" PanelHorizontalAlignment="Left" DockPanel.Dock="Bottom"/>
                <my:CheckableListBox Name="Panel" Margin="5,0,5,5" >
                    <my:CheckableListBox.ItemTemplate>
                        <DataTemplate DataType="{x:Type objects:EnginePluginInfo}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal">
                                    <controls:ExtCheckBox IsChecked="{Binding IsChecked}" VerticalAlignment="Center" DockPanel.Dock="Left" Padding="5,0" ValueChanged="OnCheckChangedEvent" />
                                    <TextBlock Text="{Binding Name}" Padding="0" FontWeight="Bold" />
                                </StackPanel>
                                <TextBlock Text="{Binding Description}" Padding="0" />
                            </StackPanel>
                        </DataTemplate>
                    </my:CheckableListBox.ItemTemplate>
                </my:CheckableListBox>
            </DockPanel>
        </TabItem>
        <TabItem Header="Settings">
            <WrapPanel Orientation="Vertical">
                <GroupBox Header="Auto update" Margin="5" >
                    <StackPanel Orientation="Vertical">
                        <captioned:CaptionedEnumDropDownList Caption="Update interval:" Margin="5" Value="{Binding Update.Interval}" SourceEnumType="autoUpdate:UpdateInterval" />
                        <captioned:CaptionedEditPath Caption="Path to the mirror directory:" Margin="5" Value="{Binding Update.Directory}" PathGetterType="Folder"/>
                        <CheckBox IsChecked="{Binding Update.ShowChanglog}" Content="Show changelog on update" Margin="5"/>
                        <Button Content="Check for updates" Margin="5" Width="128" Click="Button_Click" />
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Error reports" Margin="5">
                    <StackPanel>
                        <CheckBox Name="AllowErrorReports" Content="Send error reports" IsChecked="{Binding ErrorReports.AllowSend}" Margin="5"/>
                        <captioned:CaptionedEditPath Caption="Path to the errors directory:" Margin="5" Value="{Binding ErrorReports.Directory}" PathGetterType="Folder" IsEnabled="{Binding IsChecked, ElementName=AllowErrorReports}"/>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Fast start" Margin="5">
                    <StackPanel>
                        <captioned:CaptionedNumericUpDown Caption="Max items in history" Minimum="0" Maximum="100" Value="{Binding FastStartConfig.MaxCount}" />
                        <Button Content="Clear History" Margin="5" Width="100" HorizontalAlignment="Right" Click="ButtonClearHistoryClick"/>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Usability" Margin="5">
                    <StackPanel>
                        <captioned:CaptionedComboBox Name="Themes" Caption="Theme:" IsEditable="False" Value="{Binding Theme}" SelectedIndexChanged="ThemeChanged"/>
                        <CheckBox IsChecked="{Binding UseMenuWithIcons}" Content="Use tray menu with icons" Margin="5"/>
                        <CheckBox IsChecked="{Binding HideOnSave}" Content="Hide on save" Margin="5"/>
                        <CheckBox IsChecked="{Binding HideOnCancel}" Content="Hide on cancel" Margin="5"/>
                        <CheckBox IsChecked="{Binding StartHidden}" Content="Start hidden" Margin="5"/>
                        <CheckBox IsChecked="{Binding ShowSettingsByTraySingleClick}" Content="Show settings by single click on tray icon" Margin="5"/>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Shortcuts" Margin="5">
                    <StackPanel>
                        <Button Content="Shortcut to desktop" Click="ShortcutToDesktopClick" Margin="5" Width="128" />
                        <Button Content="Shortcut to autorun" Click="ShortcutToAutorunClick" Margin="5" Width="128"/>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="Advanced" Margin="5">
                    <Button Content="GC Collect" Click="GcCollectClick" Margin="5" Width="72"/>
                </GroupBox>
            </WrapPanel>
        </TabItem>
        <TabItem Header="Global HotKeys">
            <DockPanel>
                <controls:ExtCheckBox Content="Global HotKeys are enabled" Name="HotKeysEnabled" HorizontalAlignment="Center" VerticalAlignment="Center" Checked="HotKeysEnabledChecked" IsChecked="{Binding HotKeys.IsEnabled}" DockPanel.Dock="Top"/>
                <units:CheckableListBoxUnit Name="HotKeysView" IsEnabled="{Binding ElementName=HotKeysEnabled, Path=IsChecked}">
                    <units:CheckableListBoxUnit.ItemTemplate>
                        <DataTemplate DataType="settings:HotKeyInfo">
                            <StackPanel Margin="2">
                                <DockPanel HorizontalAlignment="Stretch" Margin="1">
                                    <controls:ExtCheckBox IsChecked="{Binding IsChecked}" ValueChanged="ScheldulerCheckChanged" VerticalAlignment="Center"/>
                                    <Button Content="x" Click="ButtonClearHotkeyClick" DockPanel.Dock="Right" Margin="1" Width="20" IsEnabled="{Binding IsChecked}"/>
                                    <my:HotKeyBox HotKey="{Binding HotKey}" Width="128" Padding="0" DockPanel.Dock="Right" IsEnabled="{Binding IsChecked}"/>
                                    <TextBlock Text="{Binding}" FontWeight="Bold" Padding="0" Margin="2" VerticalAlignment="Center" />
                                </DockPanel>
                            </StackPanel>
                        </DataTemplate>
                    </units:CheckableListBoxUnit.ItemTemplate>
                </units:CheckableListBoxUnit>
            </DockPanel>
        </TabItem>
        <TabItem Header="Scheduler">
            <DockPanel>
                <controls:ExtCheckBox Content="Schelduler is enabled" Name="SchedulerEnabled" HorizontalAlignment="Center" VerticalAlignment="Center" Checked="SheldulerEnabledChecked" IsChecked="{Binding SchedulerTasks.IsEnabled}" DockPanel.Dock="Top"/>
                <units:CheckableListBoxUnit Name="ScheldulerView" IsEnabled="{Binding ElementName=SchedulerEnabled, Path=IsChecked}" SmoothScrolling="True">
                    <units:CheckableListBoxUnit.ItemTemplate>
                        <DataTemplate DataType="settings2:SchedulerTask">
                            <StackPanel Margin="2">
                                <DockPanel HorizontalAlignment="Stretch" Margin="1">
                                    <controls:ExtCheckBox IsChecked="{Binding IsChecked}" ValueChanged="ScheldulerCheckChanged" VerticalAlignment="Center"/>
                                    <TextBlock Text="{Binding}" FontWeight="Bold" Padding="0" Margin="2" VerticalAlignment="Center"/>
                                </DockPanel>
                                <StackPanel Orientation="Horizontal">
                                    <controls:FlagsCheckBoxes BaseType="{x:Type settings2:ShortDayOfWeek}" Caption="Day of the week:" Orientation="Horizontal" Value="{Binding DaysOfWeek}" IsEnabled="{Binding IsChecked}"/>
                                    <captioned:CaptionedTimeBox Caption="Day time:" Value="{Binding TimeOfTheDay, Mode=TwoWay}" IsEnabled="{Binding IsChecked}"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </units:CheckableListBoxUnit.ItemTemplate>
                </units:CheckableListBoxUnit>
            </DockPanel>
        </TabItem>
        <TabItem Header="User Actions">
            <DockPanel>
                <units:CheckableListBoxUnit Name="UserActionsView" UnitType="Text" Title="Configure user action">
                    <units:CheckableListBoxUnit.ItemTemplate>
                        <DataTemplate DataType="{x:Type settings:MenuItemsSequence}">
                            <DockPanel>
                                <Button Content="..." VerticalAlignment="Center" Width="32" Margin="1" Click="BtnEditUserActionClick" DockPanel.Dock="Right"/>
                                <controls:ExtCheckBox IsChecked="{Binding IsChecked}" ValueChanged="UserActionsCheckChanged" VerticalAlignment="Center" DockPanel.Dock="Left"/>
                                <TextBlock Text="{Binding Key}" Padding="0" Margin="2" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" />
                            </DockPanel>
                        </DataTemplate>
                    </units:CheckableListBoxUnit.ItemTemplate>
                </units:CheckableListBoxUnit>
            </DockPanel>
        </TabItem>
        <TabItem Header="Information" Selector.Selected="InformationSelected">
            <TabControl TabStripPlacement="Bottom" >
                <TabItem Header="Change log">
                    <TextBox Name="tbChangeLog" IsReadOnly="True" TextWrapping="Wrap" IsReadOnlyCaretVisible="True" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" />
                </TabItem>
                <TabItem Header="About">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" DockPanel.Dock="Top">
                        <Label Name="Version" HorizontalAlignment="Center" />
                        <Label Content="Web site:" HorizontalAlignment="Center" />
                        <TextBlock HorizontalAlignment="Center"> 
                            <Hyperlink FontWeight="Black" Foreground="#0066B3" RequestNavigate="Hyperlink_RequestNavigate" NavigateUri="https://tbox.codeplex.com/">https://tbox.codeplex.com/</Hyperlink>
                        </TextBlock>
                        <Label Content="Licensed under GPLv2 license." HorizontalAlignment="Center" />
                    </StackPanel>
                </TabItem>
            </TabControl>
        </TabItem>
    </TabControl>
</UserControl>
